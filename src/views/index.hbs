{{!--    <a href="/signup">Signup</a> --}}
{{!--    <a href="/signin">Signin</a> --}}

{{!-- Boton --}}


<button style="z-index:30;" class="btnCart"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
    </svg>
        <div id="cart-circle"  class="circle">
    </svg>
    </div>
    <p style="color:#6EA0F3; margin:0;padding:0;font-weight:bold;">0</p>
    <a class="shopping-cart" style="color:#ccc; display:flex; justify-content:center; align-items:center; align-content:center;text-decoration:none; " href="/checkout"></a>
</button>
        <!-- Imagen principal -->
        <div class="main-image">

          
            <div class="swiper myMainSwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" style=><img src="https://res.cloudinary.com/keyzen/image/upload/v1636253117/pexels-pixabay-162553-min_ys7mmx_mjfj2o.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="https://res.cloudinary.com/keyzen/image/upload/v1636253115/pexels-andrea-piacquadio-3807167-min_jujbja_ncevgd.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="https://res.cloudinary.com/keyzen/image/upload/v1636253115/pexels-m%C3%ADdia-4116191-min_emikjy_x6trdv.jpg" alt=""></div>
            </div>

            <div class="swiper-pagination"></div>
            </div>

             

        </div>



{{!-- fin de boton cart
 --}}
<section class="search">

       <h2>BUSCADOR DE REPUESTOS</h2>
<div class="arrow bounce">
  <a class="fa fa-arrow-down fa-2x"></a>
</div>

<div class="container-selector">
    <div>
        <select class="form-select"  id="brand-selector" aria-label="Default select example">
            <option selected>Marca</option>
        </select>
    </div>
    <div>
        <select class="form-select" id="modelo-selector" aria-label="Default select example" disabled>
            <option selected>Modelo</option>
        </select>
    </div>
    <div>
        <select class="form-select" id="submodelo-selector" aria-label="Default select example" disabled>
            <option selected>Submodelo</option>
        </select>
    </div>
    <div>
        <select class="form-select" id="year-selector" aria-label="Default select example" disabled >
            <option selected>Año</option>
        </select>
    </div>

</div>


    <a type="button" class="btn btn-info" href="javascript:window.location.reload(true)" style="margin-top:1rem;">Reiniciar búsqueda</a>

    <p class="search-info">¡Navega por las principales marcas y modelos!</p>
   </section>


   
        <!-- Slider de imágenes -->


   <!-- Sección de servicios -->

        <section class="services">
            <div class="services-text">
                <h2 class="services-title">
                    Conoce nuestras principales categorías
                </h2>
                <div class="border-line"></div>
                <p>Cuando confías en repuestos autonueve tienes acceso a productos de alta calidad, acorde a los estándares del mercado.</p>
                <h3>¡Revisa nuestras principales categorías!</h3>

            </div>


            <div class="services-images">
                
                <!-- Las imagenes se insertarán como background -->

                <div id="battery-logo" class="services-image image-1">
                    <h4>BATERIAS</h4>
                </div>

                <div id="filter-logo" class="services-image image-2">
                    <h4>FILTROS</h4>                    
                </div>

                <div id="neumaticos-logo" class="services-image image-1">
                    <h4>NEUMATICOS</h4>
                </div>

                <div id="aceite-logo" class="services-image image-2">
                    <h4>ACEITES</h4>                    
                </div>
            
            </div>

        </section>
     



        {{!-- Sección de productos destacados --}}


    {{#if lastProducts}}
    <h2 class="title">Productos recientes</h2>
    <div class="wrap-lastProducts">

    <div class="products-index products">
        {{#each lastProducts}}
        <div class="product" id="product-{{id}}">
                        <a href="/producto/{{id}}">
                          <img style="max-width:100%; height:200px;"src="{{selectImg imagen 'https://res.cloudinary.com/keyzen/image/upload/v1636230517/images_s3u714.png'}}" alt="">
            </a>
            <h3 class="product-name">{{nombre}}</h3>
            <p class="product-sku">SKU: {{SKU}}</p>
            <p class="product-brand">{{marca}}</p>
            <p>${{precio}}</p>
            <div class="product-button">

                <script>
                    function restarCantidad(e){
                        const valueBox = e.target.nextElementSibling;
                        if (parseInt(valueBox.value) > 1) {
                            valueBox.value = parseInt(valueBox.value) -1
                        }
       
                    }

                    function sumarCantidad(e){
                        const valueBox = e.target.previousElementSibling;
                        debugger;
                        if (parseInt(valueBox.value) < parseInt(valueBox.max)){
                            valueBox.value = parseInt(valueBox.value) +1

                        }
                  
                    }
                </script>
                
               <button class="restar-btn" onclick="restarCantidad(event)">-</button>
                <input type="number" class="number input-cantidad" min="1" value="1" max={{cantidad}} disabled>
                <button class="sumar-btn" onclick="sumarCantidad(event)">+</button>                
            </div>  
            <a class="btn btn-primary w-100" style="margin-top:.5rem" href="{{id}}" data-id="{{id}}">Añadir</a>
        </div>
        {{/each}}
    </div>
    {{/if}}
 

   




    </div>



        <!-- Proveedores -->

        <section class="suppliers">
                <div class="suppliers-text">   
                    
                    <h2>Nuestros proveedores</h2>
                    <div class="border-line"></div>
                    <p>Contamos con proveedores con amplia experiencia en la venta de  repuestos, es por esto que en <span>Repuestos Autonueve</span> garantizamos la calidad de nuestros productos y por lo tanto tu satisfacción!</p>
                
                </div>
              
  
            <!-- Logos de marcas -->
    <div class="swiperLogos">
        <div class="swiper-wrapper">
        
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1636258933/Group_168_dzs60v.svg" alt="" class="logo-image" id="logo-philips">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_brfpma.svg" alt=""class="logo-image" id="logo-hyundai" >
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group-1_v6zas9.svg" alt=""class="logo-image" id="logo-liqui" >
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Vector_je4iif.svg" alt="" class="logo-image" id="logo-kia">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_9_s6wyls.svg" alt="" class="logo-image" id="logo-castrol">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_10_bsubno.svg" alt="" class="logo-image" id="logo-renault">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1636258933/Group_168_dzs60v.svg" alt="" class="logo-image" id="logo-philips">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_brfpma.svg" alt=""class="logo-image" id="logo-hyundai" >
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group-1_v6zas9.svg" alt=""class="logo-image" id="logo-liqui" >
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Vector_je4iif.svg" alt="" class="logo-image" id="logo-kia">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_9_s6wyls.svg" alt="" class="logo-image" id="logo-castrol">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_10_bsubno.svg" alt="" class="logo-image" id="logo-renault">
                                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1636258933/Group_168_dzs60v.svg" alt="" class="logo-image" id="logo-philips">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_brfpma.svg" alt=""class="logo-image" id="logo-hyundai" >
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group-1_v6zas9.svg" alt=""class="logo-image" id="logo-liqui" >
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Vector_je4iif.svg" alt="" class="logo-image" id="logo-kia">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_9_s6wyls.svg" alt="" class="logo-image" id="logo-castrol">
                <img class="swiper-slide" src="https://res.cloudinary.com/keyzen/image/upload/v1619891303/mobalzen/repuestosMontenegro/Group_10_bsubno.svg" alt="" class="logo-image" id="logo-renault">

        </div>


    </div>

                <!-- Swiper -->


    <!-- Swiper JS -->



        </section>

        <!-- Nosotros -->

        <section class="us">

            <div class="us-text">

                <h2>Nosotros</h2>
                <div class="border-line"></div>
                <p>Más de 15 años en el mercado de repuestos automotrices nos han entregado al experiencia necesaria para poder brindarte el mejor servicio. Nuestra empresa nace el año 2005 a raíz de nuestra intención de importar artículos de calidad para los vehículos de nuestro país. </p>
                <p> La confianza de nuestros clientes significa el cumplimiento de nuestra meta, posicionarnos como vendedores de repuestos acorde a las expectativas del mercado, entregando productos y servicios de calidad, que permitan que tú obtengas los repuestos acordes a tuproyecto.</p>
            </div>

        </section>





            <!-- Initialize Swiper -->
    <script>
var swiperLogos = new Swiper(".swiperLogos", {
        autoplay: {
          delay: 3500,
          disableOnInteraction: false
        },
        slidesPerView: 2,
        spaceBetween:20,
        navigation: {
          nextEl: ".swiperLogos > .swiper-button-next",
          prevEl: ".swiperLogos > .swiper-button-prev"
        },
        breakpoints: {
          640: {
            slidesPerView: 2,
            spaceBetween: 20,
          },
          768: {
            slidesPerView: 3,
            spaceBetween: 40,
          },
          1024: {
            slidesPerView: 4,
            spaceBetween: 50,
          },
        },
      });

    </script>


<button class="scrollUp-btn"><i class="fas fa-arrow-alt-circle-up"></i></button>
<script>
    function myTestFunction() {
        window.open("https://google.cl")
    }
</script>
<a style="border: none; background:none; position: fixed; z-index: 30; right: 1rem; bottom:6rem">
    <img style="max-width:70px" src="../images/whatsapp.png" alt="whatsapp" onclick="myTestFunction()">
</a>


<script src="/js/serviceLinks.js"></script>
<script src="/js/scrollUp.js"></script>
<script src="/js/productsWrapper.js"></script>
<script src="/js/slider.js"></script>
<script src="/js/sliderLogos.js"></script>
<script src="/js/main.js" type=module></script>

<script src="/js/scroll-top.js"></script>
<script src="/js/shoppingCart.js"></script>


<script>

    const marcas = JSON.parse(window.localStorage.getItem('marca'))
    const modelos = JSON.parse(window.localStorage.getItem('modelo'))
    const submodelos = JSON.parse(window.localStorage.getItem('submodelo'))
    const listaSubmodelos = JSON.parse(window.localStorage.getItem('listasubmodelo'))
    const fabricacion = JSON.parse(window.localStorage.getItem('fabricacion'))

    const brandSelector = document.getElementById('brand-selector');
    const modeloSelector = document.getElementById('modelo-selector');
    const submodelSelector = document.getElementById('submodelo-selector');
    const yearSelector = document.getElementById('year-selector');

    let submodelId = undefined;
    
    
    marcas.forEach(marca => {
        const html = `<option value="${marca.id}" class="brand-option">${marca.nombre}</option>`
        brandSelector.insertAdjacentHTML("beforeend", html)
    })



    if (brandSelector) {
    brandSelector.addEventListener("change", e => {
       e.preventDefault();
       const brandId = e.target.value;
       const modelosAsociados = modelos.filter((modelo) => {
            if (modelo.marca_id == brandId) {
                return true
            }
       })

       modelosAsociados.forEach(modelo => {
            const html = `<option value="${modelo.id}" class="brand-option">${modelo.nombre}</option>`
            modeloSelector.insertAdjacentHTML("beforeend", html)
       })

        brandSelector.disabled = true;
        modeloSelector.disabled = false;

    })
    }

    
    if (modeloSelector) {
    modeloSelector.addEventListener("change", e => {
       e.preventDefault();
       const modeloId = e.target.value;
       const submodelosAsociados = submodelos.filter((submodelo) => {
            if (submodelo.modelo_id == modeloId) {
                return true
            }
       })

       submodelosAsociados.forEach(submodelo => {
            const html = `<option value="${submodelo.id}" class="brand-option">${submodelo.nombre}</option>`
            submodelSelector.insertAdjacentHTML("beforeend", html)
       })

       modeloSelector.disabled = true;
       submodelSelector.disabled = false;

    })
    }

    if (submodelSelector) {
    submodelSelector.addEventListener("change", e => {
       e.preventDefault();
       debugger;
       submodelId = e.target.value;
       window.localStorage.setItem('submodelId', submodelId)
       const listaSubmodelosAsociados = listaSubmodelos.filter((listaSubmodelo) => {
            if (listaSubmodelo.submodelo_id == submodelId) {
                return true
            }
       })

       listaSubmodelosAsociados.forEach(year => {
            const html = `<option value="${year.id}" data-id="${year.id}" class="brand-option">${year.fecha}</option>`
            yearSelector.insertAdjacentHTML("beforeend", html)
       })



       submodelSelector.disabled = true;
       yearSelector.disabled = false;

    })
    }


if (yearSelector) {
    yearSelector.addEventListener("change", e => {
       e.preventDefault();
       
       const listaSubmodelId = e.target.value;
        debugger;


       window.location.href = `/search/compatibilidad/${listaSubmodelId}/1`


    })
    }

    







</script>